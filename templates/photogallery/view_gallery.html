{% extends "base.html" %}

{% block content %}
<h3>{{ gallery.title }}</h3>
<p>Started: {{ gallery.date_added }}</p>
<p>Updated: {{ gallery.date_updated }}</p>
{% if user.is_authenticated and request.user in gallery.gallery_of.all %}
<p>
    <a href="#">Edit Gallery</a><br>
    <a href="{% url 'delete_gallery' gallery_pk=gallery.pk %}">Delete Gallery</a>
</p>
<div>
    <form action="{% url 'add_photo_to_gallery' gallery_pk=gallery.pk %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ PhotoForm.as_p }}
        <button type="submit">Add Photo to Gallery</button>
    </form>
</div>
{% endif %}
<h2>Photos</h2>
{% if photos is not None %}
    {% for photo in photos %}
    <p>
        <img src="{{ photo.photo_thumb.url }}"/>
        <div>{{ photo.camera }}</div>
        <a href="{% url 'view_photo' photo_pk=photo.pk %}">View Photo</a>
    </p>
    {% empty %}
        {% if user.is_authenticated and request.user == gallery.gallery_of.all %}
        <p>You have no photos. Add some now!</p>
        {% else %}
        <p>There are no photos in this gallery yet!</p>
        {% endif %}
    {% endfor %}
{% endif %}
{% endblock %}