{% extends "base.html" %}

{% block content %}
<h3 class="title">{{ gallery.title }}</h3>
<p class="text">Started: {{ gallery.date_added }}</p>
<p class="text">Updated: {{ gallery.date_updated }}</p>
<p class="text">Owners: {{ gallery.gallery_of.all }}</p>
{% if user.is_authenticated and request.user in gallery.gallery_of.all %}
<p>
    <a class="link" href="#">Edit Gallery</a><br>
    <a class="link" href="{% url 'delete_gallery' gallery_pk=gallery.pk %}">Delete Gallery</a>
</p>
<div>
    <form action="{% url 'add_photo_to_gallery' gallery_pk=gallery.pk %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ PhotoForm.as_p }}
        <button type="submit">Add Photo to Gallery</button>
    </form>
</div>
{% endif %}
<h2 class="title">Photos</h2>
<div class="flex-container">
    {% if photos is not None %}
    {% for photo in photos %}
    <div class="flex-item">
        <img src="{{ photo.photo_thumb.url }}"/>
        <div class="text">{{ photo.camera }}</div>
        <a class="link" href="{% url 'view_photo' photo_pk=photo.pk %}">View Photo</a>
    </div>
    {% empty %}
        {% if user.is_authenticated and request.user == gallery.gallery_of.all %}
        <p class="text">You have no photos. Add some now!</p>
        {% else %}
        <p class="text">There are no photos in this gallery yet!</p>
        {% endif %}
    {% endfor %}
{% endif %}
</div>
{% endblock %}