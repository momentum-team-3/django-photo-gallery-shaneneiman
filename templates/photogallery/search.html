{% extends "base.html" %}

{% block content %}
<h2 class="title">Search Galleries and Photos</h2>
<div class="flex-item">
    <form action="{% url 'search' %}" method="GET">
        <input type="search" name="q" placeholder="Seach Photos and Galleries" value="{{query}}">
        <p>
            <button type="submit">Search</button>
        </p>
    </form>
</div>

<h3 class="title">Galleries</h3>
<div class="flex-container">
    {% if galleries is not None %}
    {% for gallery in galleries %}
        <div class="flex-item">
            <p class="text">{{ gallery.title }}</p>
            <div><img src="{{ gallery.photos.first.photo_thumb.url }}"></div>
            <a class="link" href="{% url 'view_gallery' gallery.pk %}">View Gallery</a>
        </div>
    {% empty %}
        <p class="text">There are no galleries matching your search</p>
    {% endfor %}
{% endif %}
</div>

<h3 class="title">Photos</h3>
<div class="flex-container">
    {% if photos is not None %}
    {% for photo in photos %}
        <div class="flex-item">
            <img src="{{ photo.photo_thumb.url }}"/>
            <p class="text">{{ photo.camera }} </p>
            <p class="text">{{ photo.photo_by }} </p>
            <a class="link" href="{% url 'view_photo' photo.pk %}">View Photo</a>
        </div>
    {% empty %}
        <p class="text">There are no photos matching your search</p>
    {% endfor %}
{% endif %}
</div>
{% endblock %}